<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<title>AmonOne</title>

		<link rel="stylesheet" href="http://localhost:4000/stylesheets/styles.css">
		<link rel="stylesheet" href="http://localhost:4000/stylesheets/nivo-slider.css">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
	<body>
		<header>
			<div class="wrapper">
				<a class='logo' href="/"></a>
				<a href="https://github.com/martinrusev/amonone" class="button">Github</a>
				<a href="https://amon.cx" class='button'>Amon</a>
			</div>
			
		</header>
		<section id="content">
			<div class="wrapper">
			<div id="sidebar">
	<ul>
		<li><a href="#introduction">Introduction</a></li>
		<li><a href="#installation">Installation</a></li>
		<li><a href="#configuration">Configuration</a></li>
		<li><a href="#running">Running</a></li>
		<li><a href="#changelog">Changelog</a></li>
	</ul>
</div> 
			<div id="main">
				<h1 id='introduction'>Introduction</h1>

<p>AmonOne is the open source version of <a href='https://amon.cx'>Amon</a>.</p>
<div class='nivoSlider' id='slider'>
	<img alt='' src='http://localhost:4000/images/slide-1.png' />
	<img alt='' src='http://localhost:4000/images/slide-2.png' />
</div>
<h1 id='installation'>Installation</h1>

<h2 id='automatic_installation'>Automatic installation</h2>

<p>The prefered method for installling AmonOne is by using the provided one line installer.</p>
<pre> 
	<code>curl https://raw.github.com/martinrusev/amonone/master/install.sh -k | bash</code>
</pre>
<h2 id='manual_installation'>Manual installation</h2>
<ol>
	<li>
		Clone the latest stable version of AmonOne  <code>git clone git@github.com:martinrusev/amonone.git</code>
	</li>
	<li>
		Install the prequisite packages - <code>gcc, sysstat, python-dev</code>, on RPM based distributions, the package is called <code>python-devel</code>
	</li>
	<li>
		Install the package with <code>sudo python setup.py install</code>
	</li>
	<li>
		Copy the configuration file from <a href='https://raw.github.com/martinrusev/amonone/master/amonone.conf'>https://raw.github.com/martinrusev/amonone/master/amonone.conf</a>
	to <code>/etc/amonlite.conf</code>
	</li>
	<li>
		Copy the system collector daemon from <a href='https://raw.github.com/martinrusev/amonone/master/contrib/amonone-collector'>https://raw.github.com/martinrusev/amonone/master/contrib/amonone-collector</a> 
	to <code>/etc/init.d/amonone-collector</code> 
	</li>
	<li>
		Copy the web application daemon from <a href='https://raw.github.com/martinrusev/amonone/master/contrib/amonone'>https://raw.github.com/martinrusev/amonone/master/contrib/amonone</a> 
	to <code>/etc/init.d/amonone</code> 
	</li>
	<li>
		Make the daemons executable with <code>sudo chmod +x /etc/init.d/amonone /etc/init.d/amonone </code>
	</li>
	<li>
		Create a directory for AmonOne specific log files <code>sudo mkdir /var/log/amonone</code>
	</li>
	<li>
		AmonOne stores all the information in a Mongo database. If you already have MongoDB installed, skip this step.
You can install Mongo, following this guide: <a href='http://docs.mongodb.org/manual/installation/'>http://docs.mongodb.org/manual/installation</a>
	</li>
	<li>
	 Finally start the AmonOne collector daemon with <code>sudo /etc/init.d/amonone-collector start</code>	
	</li>
	<li>
		Add <strong>amonone-collector</strong> to the list of processes that boot with the operating system:
	</li>
</ol><div class='highlight'><pre><code class='bash'><span class='c'># For Debian based distributions	</span>
sudo update-rc.d amonone-collector defaults

<span class='c'># For RPM based distributions</span>
sudo chkconfig --add amonone-collector
</code></pre></div>
<h1 id='configuration'>Configuration</h1>

<p>AmonOne has only one configuration file and you can find it at <code>/etc/amonone.conf</code>. The configuration file is in JSON, so after editing it, please check if the syntax is valid at: <a href='http://jsonlint.com/'>http://jsonlint.com/</a></p>

<p>You can find an example configuration file with all the parameters at <a href='https://raw.github.com/martinrusev/amonone/master/amonone.conf'>https://raw.github.com/martinrusev/amonone/master/amonone.conf</a></p>

<p>The configuration file has the following parameters:</p>

<ul>
<li>
<p><strong>mongo</strong> - Configuration options for MongoDB. Default: mongodb://127.0.0.1:27017.</p>

<p>Take a look at <a href='http://docs.mongodb.org/manual/reference/connection-string/'>http://docs.mongodb.org/manual/reference/connection-string/</a> for more information about the URI format</p>
</li>

<li>
<p><strong>web_app</strong> - Configuration options for the web interface</p>

<ul>
<li>
<p><strong>host</strong> - The host where the web application is running. Default: &#8220;127.0.0.1&#8221;</p>
</li>

<li>
<p><strong>port</strong> - The port where the web application is running. Default: 2464</p>
</li>
</ul>
</li>

<li>
<p><strong>system_check_period</strong> - How often does the daemon collect information, in seconds. Default: 60</p>
</li>

<li>
<p><strong>secret_key</strong> - Random string, generated everytime you install or update AmonOne. Used for cookies and sessions.</p>
</li>

<li>
<p><strong>timezone</strong> - AmonOne saves and displays everything in UTC. With this option you can display the data in your local timezone. To do that, find your desired timezone at <a href='http://en.wikipedia.org/wiki/List_of_tz_database_time_zones'>
http://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a> and paste the value from the <em>TZ</em> row in amonlite.conf</p>
</li>

<li>
<p><strong>proxy</strong> - Controls the base url value ( used in forms and urls through the web app ).</p>

<ul>
<li>
<p>Default: &#8220;False&#8221; - AmonOne will generate a base_url using the values from web_app:host and web_app:port</p>
</li>

<li>
<p>&#8220;True&#8221; - base_url is an empty string. Set this value to &#8220;True&#8221; if you want to run AmonOne behind a traditional web server like nginx or apache</p>
</li>
</ul>
</li>
</ul>

<h1 id='running'>Running</h1>

<p>AmonOne has 2 main parts: <br /></p>

<ul>
<li>
<p><strong>amonone-collector</strong> - A collector daemon</p>
</li>

<li>
<p><strong>amonone</strong> - Web application, that displays the information</p>
</li>
</ul>

<p>AmonOne stores everything in a Mongo database, you can check if that&#8217;s working by typing <code>mongo</code> in the terminal. If mongo is working properly, the message that you will see after typing the command should say <code>Connected to test</code></p>

<h2 id='controlling_the_collector_daemon'>Controlling the collector daemon</h2>

<p>The collector daemon is started automatically when you boot your operation system. It&#8217;s located in <code>
/etc/init.d/amonone-collector</code> and you can control it with the following commands:</p>

<ul>
<li>
<p><strong>status</strong> - returns the current status of the daemon. If AmonOne is running properly this command should return <code> AmonOne is running as PID ... </code></p>
</li>

<li>
<p><strong>restart</strong> - restarts the daemon, you should always do that, after altering the configuration file</p>
</li>

<li>
<p><strong>stop</strong>- stops the daemon</p>
</li>

<li>
<p><strong>start</strong> - starts the daemon and displays <code>AmonOne started as PID ... </code> if successfull</p>
</li>
</ul>

<p>Depending on your operating system, you probably should run these commands as root <br /><br /> <code>sudo /etc/init.d/amonone-collector start|stop|restart</code></p>

<p>If the daemon doesn&#8217;t start or is not working properly, you can check <em>/usr/local/amonlite/amonone-collector.log</em> for detailed information about the problem.</p>

<h2 id='controlling_the_web_interface'>Controlling the web interface</h2>

<p>To save resources, the web interface is not started with your operating system, so you have to start it manually. It&#8217;s located in <code>/etc/init.d/amonone</code> and you can control it with the following commands:</p>

<ul>
<li>
<p><strong>status</strong> - returns the current status of the web app. This command should return <br /><br /> <code> AmonOne .. version .. is running as PID. The AmonOne web interface is running on http://127.0.0.1:2464</code></p>
</li>

<li>
<p><strong>restart</strong> - restarts the web application</p>
</li>

<li>
<p><strong>stop</strong> - stops the web application</p>
</li>

<li>
<p><strong>start</strong> - starts the web application and displays <br /><br /><code>The AmonOne web interface is running on http://127.0.0.1:2464 </code></p>
</li>
</ul>

<p>You can control both the port and the host from the configuration file. The Web interface is <em>mandatory</em> if you want to collect log information and exception data.</p>

<p>If the web app doesn&#8217;t start, you can check <em>/var/log/amonone/amonone.log</em> for detailed information about the problem.</p>

<h1 id='changelog'>Changelog</h1>

<h2 id='amonone_168__released_on_9072013'>AmonOne 1.6.8 - Released on 9.07.2013</h2>
			</div><!-- main END -->
			</div><!-- wrapper END -->
		</section>
		
		<footer></footer>

		</body>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-nivoslider/3.2/jquery.nivo.slider.pack.js"></script>
<script type="text/javascript">
$(window).load(function() {
    $('#slider').nivoSlider({
        effect: 'fade',
        animSpeed: 200, 
         directionNav: false, 
        pauseTime: 5000,  });
});
</script>
</html>
